<UserControl xmlns="https://github.com/avaloniaui"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
			 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
			 xmlns:vm="using:SARControlPanel.Avalonia.ViewModels"
			 mc:Ignorable="d" d:DesignWidth="400" d:DesignHeight="200"
			 x:Class="SARControlPanel.Avalonia.Controls.DevicesMessageSenderControl"
			 x:DataType="vm:MessageSenderViewModel">

	<Design.DataContext>
		<vm:MessageSenderViewModel/>
	</Design.DataContext>

	<HeaderedContentControl Header="Data Sender (TX)" BorderThickness="1" Padding="5">
		<Grid RowDefinitions="Auto, Auto, *, Auto"
			  MaxHeight="{Binding MaxHeight, RelativeSource={RelativeSource AncestorType=UserControl}}"
			  MaxWidth="{Binding MaxWidth, RelativeSource={RelativeSource AncestorType=UserControl}}">
			<!-- Sender Control Panel -->
			<Grid Grid.Row="0" ColumnDefinitions="*,Auto" RowDefinitions="Auto,Auto" HorizontalAlignment="Stretch" Margin="0,0,0,10">
				<!-- Sent Count -->
				<StackPanel Grid.Row="0" Grid.Column="0" Orientation="Horizontal" Spacing="5" VerticalAlignment="Center">
					<TextBlock Text="Bytes Sent:" VerticalAlignment="Center"/>
					<TextBlock Text="{Binding State.BytesSentCount}" FontWeight="SemiBold" VerticalAlignment="Center"/>
				</StackPanel>

				<!-- Send Button -->
				<Button Grid.Row="0" Grid.Column="1" Content="Send" Command="{Binding SendCommand}" VerticalAlignment="Center"
						Margin="10,0,0,0" ToolTip.Tip="Send data to connected COM port"/>

				<!-- HEX Mode Toggle -->
				<ToggleSwitch Grid.Row="1" Grid.Column="0"
							  IsChecked="{Binding State.IsHexMode}"
							  OnContent="HexMode" OffContent="TextMode (ASCII)"
							  VerticalAlignment="Center" ToolTip.Tip="Trigger HexMode when enabled"/>
			</Grid>

			<!-- Sending Input Area -->
			<TextBox Grid.Row="2"
					 Text="{Binding DataToSend}"
					 Watermark="Enter data to send (Text or HEX)"
					 AcceptsReturn="True"
					 TextWrapping="Wrap"
					 KeyDown="TextBox_KeyDown"
					 MinHeight="80"
					 VerticalAlignment="Stretch"
					 ScrollViewer.VerticalScrollBarVisibility="Auto"
					 ScrollViewer.HorizontalScrollBarVisibility="Disabled"/>

			<!-- Error Message -->
			<TextBlock Grid.Row="3"
					   Text="{Binding SendErrorMessage}"
					   Foreground="Red"
					   IsVisible="{Binding HasSendError}"
					   TextWrapping="Wrap"/>
		</Grid>
	</HeaderedContentControl>
</UserControl>
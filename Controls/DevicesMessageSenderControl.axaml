<UserControl xmlns="https://github.com/avaloniaui"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
			 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
			 xmlns:vm="using:SARControlPanel.Avalonia.ViewModels"
			 mc:Ignorable="d" d:DesignWidth="400" d:DesignHeight="200"
			 x:Class="SARControlPanel.Avalonia.Controls.DevicesMessageSenderControl"
			 x:DataType="vm:MessageSenderViewModel">

	<Design.DataContext>
		<vm:MessageSenderViewModel/>
	</Design.DataContext>

	<HeaderedContentControl Header="Data Sender (TX)" BorderThickness="1" Padding="5">
		<StackPanel Spacing="10" MaxHeight="400" MaxWidth="600">
			<!-- Sender Control Panel -->
			<Grid ColumnDefinitions="*, Auto, Auto" RowDefinitions="*,*"  HorizontalAlignment="Stretch">
				<!-- Sent Count -->
				<StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="5" HorizontalAlignment="Left" VerticalAlignment="Center">
					<TextBlock Text="Bytes Sent:" VerticalAlignment="Center"/>
					<TextBlock Text="{Binding State.BytesSentCount}" FontWeight="SemiBold" VerticalAlignment="Center"/>
				</StackPanel>

				<!-- HEX Mode Toggle -->
				<StackPanel Grid.Column="0" Grid.Row="1"  Orientation="Horizontal" Spacing="5" VerticalAlignment="Center" HorizontalAlignment="Left">
					<TextBlock Text="Text Mode" VerticalAlignment="Center"/>
					<ToggleSwitch IsChecked="{Binding State.IsHexMode}" VerticalAlignment="Center"/>
					<TextBlock Text="HEX Mode" VerticalAlignment="Center"/>
				</StackPanel>

				<Button Grid.Column="1" Content="Send" Command="{Binding SendCommand}" VerticalAlignment="Center"/>
			</Grid>

			<!-- Sending Input Area -->
			<TextBox Grid.Row="0" Grid.Column="0"
					 Text="{Binding DataToSend}"
					 Watermark="Enter data to send (Text or HEX)"
					 AcceptsReturn="True"
					 TextWrapping="Wrap"
					 KeyDown="TextBox_KeyDown"
					 MinHeight="100" MaxHeight="200"  MaxWidth="600"
					 ScrollViewer.VerticalScrollBarVisibility="Auto" />

			<!-- Error Message -->
			<TextBlock Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2"
					   Text="{Binding SendErrorMessage}"
					   Foreground="Red"
					   IsVisible="{Binding HasSendError}"/>
		</StackPanel>
	</HeaderedContentControl>
</UserControl>

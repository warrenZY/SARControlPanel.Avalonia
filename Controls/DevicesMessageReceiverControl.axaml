<UserControl xmlns="https://github.com/avaloniaui"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
			 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
			 xmlns:vm="using:SARControlPanel.Avalonia.ViewModels"
			 mc:Ignorable="d" d:DesignWidth="400" d:DesignHeight="200"
			 x:Class="SARControlPanel.Avalonia.Controls.DevicesMessageReceiverControl"
			 x:DataType="vm:MessageReceiverViewModel">

	<Design.DataContext>
		<vm:MessageReceiverViewModel/>
	</Design.DataContext>

	<HeaderedContentControl Header="Data Receiver (RX)" BorderThickness="1" Padding="5">
		<Grid RowDefinitions="Auto,Auto,*"
			  MaxHeight="{Binding MaxHeight, RelativeSource={RelativeSource AncestorType=UserControl}}"
			  MaxWidth="{Binding MaxWidth, RelativeSource={RelativeSource AncestorType=UserControl}}">
			<!-- Receiver Control Panel -->
			<Grid Grid.Row="0" RowDefinitions="Auto,Auto" ColumnDefinitions="*,Auto,Auto" HorizontalAlignment="Stretch" Margin="0,0,0,10">
				<!-- Bytes Received -->
				<StackPanel Grid.Row="0" Grid.Column="0" Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
					<TextBlock Text="Bytes Received:" VerticalAlignment="Center"/>
					<TextBlock Text="{Binding State.BytesReceivedCount}" FontWeight="SemiBold" VerticalAlignment="Center"/>
				</StackPanel>

				<!-- Auto-scroll toggle -->
				<StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="10,0">
					<CheckBox IsChecked="{Binding AutoScrollEnabled}" VerticalAlignment="Center"
							  ToolTip.Tip="Auto scroll to end when enabled"/>
					<TextBlock Text="Auto-scroll" VerticalAlignment="Center"/>
				</StackPanel>

				<!-- Clear Button -->
				<Button Grid.Row="0" Grid.Column="2" Content="Clear" Command="{Binding ClearReceivedDataCommand}"
						VerticalAlignment="Center" ToolTip.Tip="Clear receiving area"/>

				<!-- HEX Mode Toggle -->
				<ToggleSwitch Grid.Row="1" Grid.Column="0"
							  IsChecked="{Binding State.IsHexMode}"
							  OnContent="HexMode" OffContent="TextMode (ASCII)"
							  VerticalAlignment="Center" ToolTip.Tip="Trigger HexMode when enabled"/>
			</Grid>

			<!-- Received Data Display Area -->
			<TextBox Grid.Row="2"
					 Name="ReceivedTextBox"
					 Text="{Binding ReceivedDataText}"
					 IsReadOnly="True"
					 AcceptsReturn="True"
					 TextWrapping="Wrap"
					 MinHeight="80"
					 VerticalAlignment="Stretch"
					 ScrollViewer.VerticalScrollBarVisibility="Auto"
					 ScrollViewer.HorizontalScrollBarVisibility="Disabled"/>
		</Grid>
	</HeaderedContentControl>
</UserControl>
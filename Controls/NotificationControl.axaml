<UserControl xmlns="https://github.com/avaloniaui"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
			 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
			 xmlns:vm="using:SARControlPanel.Avalonia.ViewModels"
			 xmlns:services="using:SARControlPanel.Avalonia.Services"
			 mc:Ignorable="d" d:DesignWidth="400" d:DesignHeight="150"
			 x:Class="SARControlPanel.Avalonia.Controls.NotificationControl"
			 x:DataType="vm:NotificationViewModel">

	<DockPanel Margin="5"
			   MaxHeight="{Binding MaxHeight, RelativeSource={RelativeSource AncestorType=UserControl}}"
			   MaxWidth="{Binding MaxWidth, RelativeSource={RelativeSource AncestorType=UserControl}}">
		<!-- Header with title and auto-scroll toggle -->
		<Border DockPanel.Dock="Top">
			<Grid>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="*"/>
					<ColumnDefinition Width="Auto"/>
				</Grid.ColumnDefinitions>

				<TextBlock Grid.Column="0"
						   Text="Notification Center"
						   FontWeight="Bold"
						   VerticalAlignment="Center"/>

				<CheckBox Grid.Column="1"
						  Content="Auto-scroll"
						  IsChecked="{Binding AutoScrollEnabled}"
						  VerticalAlignment="Center"/>
			</Grid>
		</Border>
		<ListBox x:Name="NotificationListBox"
				 ItemsSource="{Binding MessagesView}"
				 SelectionMode="Single"
				 MinHeight="80"
				 Padding="4"
				 Background="Transparent"
				 BorderBrush="Gray"
				 BorderThickness="1"
				 CornerRadius="3">

			<ListBox.Styles>
				<Style Selector="ListBoxItem">
					<Setter Property="Padding" Value="2" />
					<Setter Property="Margin" Value="0,1" />
					<Setter Property="ContextMenu">
						<ContextMenu>
							<MenuItem Header="Copy" Click="OnCopyMenuItemClick"/>
						</ContextMenu>
					</Setter>
				</Style>
			</ListBox.Styles>

			<ListBox.DataTemplates>
				<DataTemplate DataType="services:NotificationMessage">
					<Grid ColumnDefinitions="Auto, Auto, *" Margin="0">
						<TextBlock Grid.Column="0"
								   Text="{Binding Timestamp, StringFormat='[{0:HH:mm:ss}]'}"
								   Margin="0,0,5,0"
								   VerticalAlignment="Center"/>
						<TextBlock Grid.Column="1"
								   Text="{Binding Level}"
								   Margin="0,0,10,0"
								   FontWeight="Bold"
								   VerticalAlignment="Center">
							<TextBlock.Styles>
								<Style Selector="TextBlock[Text=Info]">
									<Setter Property="Foreground" Value="CornflowerBlue"/>
								</Style>
								<Style Selector="TextBlock[Text=Warning]">
									<Setter Property="Foreground" Value="Orange"/>
								</Style>
								<Style Selector="TextBlock[Text=Error]">
									<Setter Property="Foreground" Value="Red"/>
								</Style>
							</TextBlock.Styles>
						</TextBlock>
						<TextBlock Grid.Column="2"
								   Text="{Binding Message}"
								   TextWrapping="Wrap"
								   VerticalAlignment="Center"/>
					</Grid>
				</DataTemplate>
			</ListBox.DataTemplates>
		</ListBox>
	</DockPanel>
</UserControl>
<Window xmlns="https://github.com/avaloniaui"
		xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		xmlns:vm="using:SARControlPanel.Avalonia.ViewModels"
		xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
		xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
		mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
		Width="800" Height="600"
		xmlns:ctrls="using:SARControlPanel.Avalonia.Controls"
		x:Class="SARControlPanel.Avalonia.Views.MainWindow"
		x:DataType="vm:MainWindowViewModel"
		Icon="/Assets/avalonia-logo.ico"
		Title="SARControlPanel.Avalonia"
		FontSize="{Binding ScalingService.ScaledFontSize}">

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>

 <Grid RowDefinitions="Auto, *" 
              ColumnDefinitions="Auto,5,*" 
              Margin="8">

            <!-- Top: Scale config area -->
            <StackPanel Grid.Row="0" 
                        Grid.Column="0" 
                        Grid.ColumnSpan="3"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Orientation="Horizontal" 
                        Spacing="8" 
                        Margin="0,0,0,8">
                <TextBlock Text="Scale:" 
                           VerticalAlignment="Center"/>
                <Slider Minimum="0.75" 
                        Maximum="2.5" 
                        Width="200"
                        VerticalAlignment="Center"
                        Value="{Binding ScalingService.ScaleFactor}"/>
                <TextBlock MinWidth="40"
                           VerticalAlignment="Center"
                           Text="{Binding ScalingService.ScaleFactor, StringFormat='{}{0:P0}'}"/>
                <Button Content="Reset" 
                        Margin="8,0,0,0"
                        Command="{Binding ResetScaleCommand}"/>
            </StackPanel>

            <!-- Left: Configuration (resizable) -->
            <ctrls:DevicesConfigurationControl
                Grid.Row="1"
                Grid.Column="0"
                HorizontalAlignment="Stretch" 
                VerticalAlignment="Stretch"
                Margin="0"
                DataContext="{Binding DevicesConfigurationViewModel}"/>

            <!-- Grid splitter to allow user resize -->
            <GridSplitter Grid.Row="1"
                          Grid.Column="1"
                          HorizontalAlignment="Stretch"
                          VerticalAlignment="Stretch"
                          Width="5"
                          ResizeDirection="Columns"
                          Background="{DynamicResource SystemControlBackgroundTransparentBrush}"/>

            <!-- Right: messaging controls + notification center -->
            <Grid Grid.Row="1"
                  Grid.Column="2"
                  RowDefinitions="Auto,*" 
                  ColumnDefinitions="*">

                <StackPanel Grid.Row="0" 
                            Orientation="Vertical" 
                            Spacing="8" 
                            Margin="0,12,0,0">
                    <!-- Receiver -->
                    <ctrls:DevicesMessageReceiverControl
                        HorizontalAlignment="Stretch" 
                        VerticalAlignment="Stretch"
                        MaxHeight="300"
                        DataContext="{Binding MessageReceiverViewModel}"/>

                    <!-- Sender -->
                    <ctrls:DevicesMessageSenderControl
                        HorizontalAlignment="Stretch" 
                        VerticalAlignment="Top"
                        MaxHeight="200"
                        Margin="0,6,0,0"
                        DataContext="{Binding MessageSenderViewModel}"/>
                </StackPanel>

                <!-- Notification center -->
                <ctrls:NotificationControl
                    Grid.Row="1"
                    DataContext="{Binding NotificationViewModel}"/>
            </Grid>
        </Grid>
</Window>